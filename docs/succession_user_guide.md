# 📊 サクセッション評価ツール 手順書（初心者向け）

## 📌 はじめに
この手順書は、サクセッション評価ツールを初めて使う方向けのガイドです。画面構成と操作の流れ（設定 → 実行 → 結果確認 → 調整）をコンパクトに説明します。

## 🚀 システムの起動方法
1. ブラウザ（Chrome/Edge/Safari 等）を開く
2. URL にアクセス: `http://localhost:8501`（起動済みの場合）
3. 未起動なら、ターミナルで `streamlit run app.py` を実行してからブラウザにアクセス

## 🖼 画面構成
- 左（サイドバー）
  - システム選択に戻る
  - API 設定（Claude API Key）
  - ドライラン（ダミー出力）のオン/オフ
- 右（メインタブ）
  - 評価: 入力 → 実行 → 結果
  - プロンプト設定: 正規化 / エビデンス / スコア（共通） / スコア（項目別ヒント） / プレビュー

> 参考キャプチャ: `docs/capture_system_select.png`, `docs/capture_layout.png`

## ✅ はじめての実行
### 1) API キーを設定
- サイドバー「🔑 API 設定」を開く
- Claude API Key を入力 → 「API キーを保存」
- 「✅ API 設定済み」と表示されれば準備完了
- API キーが無くても **ドライラン（ダミー出力）** で出力形式を確認できます

### 2) 入力 → 実行
- メインの「評価」タブを開く
- テキストボックスに「課題 + 実施内容」をまとめて入力（1 ボックス）
- 「AI 評価を実行」をクリック
- 実行フロー: 正規化 → エビデンス抽出（原文逐語） → スコアリング（1–5 点）

### 3) 結果を確認
- 「獲得度」→ SF / VCI / OL / DE / LA（各見出しに **x/5** を表示）
- 「準備度」→ CV / MR / MN（同上）
- 各項目で表示される内容:
  - 根拠（原文）: 入力原文からの逐語引用（言い換え・要約なし）
  - コメント: 短い評価理由（1〜2 段落）
- 詳細（開発者向け）: JSON 全体（normalized/evidence/scores）

## 🧪 ドライラン（ダミー出力）
- サイドバー「ドライラン（ダミー出力）」にチェック
- API を呼ばずに **本番と同じ表示形式** で確認
- プロンプトの変更効果はドライランには反映されません（形式確認用）

## 📝 プロンプト設定（上級者向け）
### 構成
- 正規化: JSON のみ返答、`summary` / `text` の分離を明記
- エビデンス: ORIGINAL_TEXT からの逐語抜粋（サブストリング）を強制、`target` は `SF|VCI|OL|DE|LA|CV|MR|MN`
- スコア（共通）: 各中項目に `score(1–5)`, `reason`, `evidenceIds` を必須化
- スコア（項目別ヒント）: 各中項目の採点観点（Rubrics）を短文で記述（スコア実行時の User メッセージに結合）
- プレビュー: 現在のプロンプトと Rubrics を確認

### 編集の影響範囲
- 正規化: 後続ステップの下地が変わる（要約しすぎに注意）
- エビデンス: 根拠の精度・件数・粒度に影響（逐語抜粋の指示は維持）
- スコア（共通）: 返却 JSON の必須形に影響（`score/reason/evidenceIds` を維持）
- 項目別ヒント: 採点観点のチューニング（出力形式は不変）
- 適用タイミング: 「評価」タブで実行した時点の最新プロンプトが使われます

## 🔧 トラブルシューティング（抜粋）
- API エラー: API キーを再確認。失敗時は自動でダミーに切替（画面の案内を参照）
- エビデンスが出ない: 入力の具体性不足、または抽出条件が厳しすぎる可能性
- スコア欠落: スコア（共通）で `score/reason/evidenceIds` 必須を再確認
- 変更が反映されない: ドライラン中ではないか確認。プレビューで内容を確認し、本番実行で効果を検証

## 📎 付録：項目一覧
- 獲得度（5）: 戦略構想力（SF）、価値創出・イノベーション力（VCI）、人的資源・組織運営力（OL）、意思決定・実行力（DE）、学習・適応力（LA）
- 準備度（3）: キャリアビジョン（CV）、使命感・責任感（MR）、体制・ネットワーク（MN）

## 推奨環境
- ブラウザ: Chrome / Edge / Safari 最新版
- ネットワーク: 本番実行時は安定した接続

